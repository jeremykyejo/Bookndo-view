+function(e){"use strict";var t="Microsoft Internet Explorer"==window.navigator.appName,i=function(t,i){if(this.$element=e(t),this.$input=this.$element.find(":file"),0!==this.$input.length){this.name=this.$input.attr("name")||i.name,this.$hidden=this.$element.find('input[type=hidden][name="'+this.name+'"]'),0===this.$hidden.length&&(this.$hidden=e('<input type="hidden" />'),this.$element.prepend(this.$hidden)),this.$preview=this.$element.find(".fileinput-preview");var s=this.$preview.css("height");"inline"!=this.$preview.css("display")&&"0px"!=s&&"none"!=s&&this.$preview.css("line-height",s),this.original={exists:this.$element.hasClass("fileinput-exists"),preview:this.$preview.html(),hiddenVal:this.$hidden.val()},this.inline_flag=this.$element.find(".input-group").length,this.inline_flag&&(this.$change=this.$element.find('[data-role="change"]'),this.$select_file=this.$element.find('[data-role="select-file"]')),this.listen()}};i.prototype.listen=function(){this.$input.on("change.bs.fileinput",e.proxy(this.change,this)),e(this.$input[0].form).on("reset.bs.fileinput",e.proxy(this.reset,this)),this.inline_flag&&this.$element.on("mousemove.bs.fileinput",e.proxy(this.checkmove,this)).on("mouseout.bs.fileinput",e.proxy(this.resetControlsClass,this)).on("mousedown.bs.fileinput",e.proxy(this.activateControls,this)),this.$element.find('[data-trigger="fileinput"]').on("click.bs.fileinput",e.proxy(this.trigger,this)),this.$element.find('[data-dismiss="fileinput"]').on("click.bs.fileinput",e.proxy(this.clear,this))},i.prototype.change=function(t){if(void 0===t.target.files&&(t.target.files=t.target&&t.target.value?[{name:t.target.value.replace(/^.+\\/,"")}]:[]),0!==t.target.files.length){this.$hidden.val(""),this.$hidden.attr("name",""),this.$input.attr("name",this.name);var i=t.target.files[0];if(this.$preview.length>0&&("undefined"!=typeof i.type?i.type.match("image.*"):i.name.match(/\.(gif|png|jpe?g)$/i))&&"undefined"!=typeof FileReader){var s=new FileReader,n=this.$preview,a=this.$element;s.onload=function(s){var l=e("<img>");l[0].src=s.target.result,t.target.files[0].result=s.target.result,a.find(".fileinput-filename").text(i.name),"none"!=n.css("max-height")&&l.css("max-height",parseInt(n.css("max-height"),10)-parseInt(n.css("padding-top"),10)-parseInt(n.css("padding-bottom"),10)-parseInt(n.css("border-top"),10)-parseInt(n.css("border-bottom"),10)),n.html(l),a.addClass("fileinput-exists").removeClass("fileinput-new"),a.trigger("change.bs.fileinput",t.target.files)},s.readAsDataURL(i)}else this.$element.find(".fileinput-filename").text(i.name),this.$preview.text(i.name),this.$element.addClass("fileinput-exists").removeClass("fileinput-new"),this.$element.trigger("change.bs.fileinput")}},i.prototype.clear=function(e){if(e&&e.preventDefault(),this.$hidden.val(""),this.$hidden.attr("name",this.name),this.$input.attr("name",""),t){var i=this.$input.clone(!0);this.$input.after(i),this.$input.remove(),this.$input=i}else this.$input.val("");this.$preview.html(""),this.$element.find(".fileinput-filename").text(""),this.$element.addClass("fileinput-new").removeClass("fileinput-exists"),e!==!1&&(this.$input.trigger("change"),this.$element.trigger("clear.bs.fileinput"))},i.prototype.reset=function(){this.clear(!1),this.$hidden.val(this.original.hiddenVal),this.$preview.html(this.original.preview),this.$element.find(".fileinput-filename").text(""),this.original.exists?this.$element.addClass("fileinput-exists").removeClass("fileinput-new"):this.$element.addClass("fileinput-new").removeClass("fileinput-exists"),this.$element.trigger("reset.bs.fileinput")},i.prototype.checkmove=function(e){var t=this.$select_file.offset().left,i=this.$change.offset().left;this.$change.is(":hidden")?e.pageX>t&&e.pageX<t+this.$select_file.width()?this.$select_file.addClass("hover"):this.$select_file.removeClass("hover"):e.pageX>i&&e.pageX<i+this.$select_file.width()?this.$change.addClass("hover"):this.$change.removeClass("hover")},i.prototype.activateControls=function(){this.$change.is(":hidden")?this.$select_file.addClass("active"):this.$change.addClass("active")},i.prototype.resetControlsClass=function(){this.$change.removeClass("hover active"),this.$select_file.removeClass("hover active")},i.prototype.trigger=function(e){this.$input.trigger("click"),e.preventDefault()},e.fn.fileinput=function(t){return this.each(function(){var s=e(this),n=s.data("fileinput");n||s.data("fileinput",n=new i(this,t)),"string"==typeof t&&n[t]()})},e.fn.fileinput.Constructor=i,e(document).on("click.fileinput.data-api",'[data-provides="fileinput"]',function(t){var i=e(t.target).closest('[data-dismiss="fileinput"], [data-trigger="fileinput"]');i.length>0&&t.preventDefault()}),e(function(){e('[data-provides="fileinput"]').each(function(){var t=e(this);t.data("fileinput")||t.fileinput(t.data())})})}(window.jQuery);